<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>bnfimage - Tutorial • bnfimage</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="bnfimage - Tutorial">
<meta property="og:description" content="bnfimage">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bnfimage</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/bnfimage.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Rekyt/bnfimage/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="bnfimage_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>bnfimage - Tutorial</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Rekyt/bnfimage/blob/master/vignettes/bnfimage.Rmd"><code>vignettes/bnfimage.Rmd</code></a></small>
      <div class="hidden name"><code>bnfimage.Rmd</code></div>

    </div>

    
    
<!--
# Pre-render with
knitr::knit("vignettes/_bnfimage.Rmd", output = "vignettes/bnfimage.Rmd")
-->
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rekyt.github.io/bnfimage">bnfimage</a></span><span class="op">)</span></code></pre></div>
<p>The BnF Gallica image library contains thousands of freely accessible images of historical interests. It provides an Application Programming Interface to access it (<a href="https://api.bnf.fr/api-iiif-de-recuperation-des-images-de-gallica#scroll-nav__1">see their documentation</a>). The access is possible through the <a href="https://iiif.io/">IIIF</a> API. The goal of <code>bnfimage</code> is to let you access this API directly from R.</p>
<div id="get-images---bi_image" class="section level1">
<h1 class="hasAnchor">
<a href="#get-images---bi_image" class="anchor"></a>Get Image(s) - <code>bi_image()</code>
</h1>
<p>To get a specific image, you first need to get its identifier from Gallica. The identifier is a string that begins with <code>ark:/</code>. It is accessible from browsing <a href="https://gallica.bnf.fr">Gallica</a> as the URL of the object such as: <code>https://gallica.bnf.fr/ark:/12148/bpt6k10411495/f11.item#</code> giving the id <code>ark:/12148/bpt6k10411495/f11</code>.</p>
<div id="single-image" class="section level2">
<h2 class="hasAnchor">
<a href="#single-image" class="anchor"></a>Single Image</h2>
<p>To download a single image you can use the <code><a href="../reference/bi_image.html">bi_image()</a></code> with the identifier of the object:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-1.png" alt=""><p class="caption">plot of chunk bi-image</p>
</div>
<div id="image-crop" class="section level3">
<h3 class="hasAnchor">
<a href="#image-crop" class="anchor"></a>Image Crop</h3>
<p>This displays a small portion of the image as by default this functions only returns the top left corner of the image from 0 to 500px in both directions.</p>
<p>To get the full image you can use the argument <code>region</code> with the value <code>"full"</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="st">"full"</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-region-full-1.png" alt=""><p class="caption">plot of chunk bi-image-region-full</p>
</div>
<p>Otherwise if you want to crop a specific region in the image you can define it as length 4 numeric vector specifiying the coordinates of the top left most point and the bottom right point. For example if you want to extract the image from 1250px x and 1300px y to 1600px x and 1650px y you would call:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1250</span>, <span class="fl">1300</span>, <span class="fl">1600</span>, <span class="fl">1650</span><span class="op">)</span>,
         size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-region-crop-1.png" alt=""><p class="caption">plot of chunk bi-image-region-crop</p>
</div>
</div>
<div id="image-size" class="section level3">
<h3 class="hasAnchor">
<a href="#image-size" class="anchor"></a>Image size</h3>
<p>As you noticed previous commands specified a <code>size</code> argument. It corresponds to the size of the extracted image. It can be equal to <code>"full"</code> so that the extracted region is returned without being scaled.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1600</span>, <span class="fl">1650</span>, <span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>,
         size <span class="op">=</span> <span class="st">"full"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-size-full-1.png" alt=""><p class="caption">plot of chunk bi-image-size-full</p>
</div>
<p>It can also be a numeric vector of lenth 2 that gives the size at which the extracted region should be scaled:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1250</span>, <span class="fl">1300</span>, <span class="fl">1600</span>, <span class="fl">1650</span><span class="op">)</span>,
         size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-size-small-1.png" alt=""><p class="caption">plot of chunk bi-image-size-small</p>
</div>
<p>Other options exist in the <a href="https://iiif.io/api/image/1.1/#4-2-size">IIIF Image API</a> but are not yet implemented in <code>bnfimage</code>.</p>
</div>
<div id="rotation" class="section level3">
<h3 class="hasAnchor">
<a href="#rotation" class="anchor"></a>Rotation</h3>
<p><code>bnfimage</code> supports a <code>rotation</code> argument that returns a rotated image. By default the returned image is not rotated (<code>rotation = 0</code>). The argument is the clockwise rotation angle in degrees. When the rotation angle is not a multiple of 90° then the background color used is white.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># No rotation</span>
<span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1250</span>, <span class="fl">1300</span>, <span class="fl">1600</span>, <span class="fl">1650</span><span class="op">)</span>,
         size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">41</span><span class="op">)</span>,
         rotation <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-region-crop-rotation-1.png" alt=""><p class="caption">plot of chunk bi-image-region-crop-rotation</p>
</div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># 90° clockwise rotation</span>
<span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1250</span>, <span class="fl">1300</span>, <span class="fl">1600</span>, <span class="fl">1650</span><span class="op">)</span>,
         size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">41</span><span class="op">)</span>,
         rotation <span class="op">=</span> <span class="fl">90</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-region-crop-rotation-2.png" alt=""><p class="caption">plot of chunk bi-image-region-crop-rotation</p>
</div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Non-multiple of 90° rotation</span>
<span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1250</span>, <span class="fl">1300</span>, <span class="fl">1600</span>, <span class="fl">1650</span><span class="op">)</span>,
         size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">41</span><span class="op">)</span>,
         rotation <span class="op">=</span> <span class="fl">153</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-region-crop-rotation-3.png" alt=""><p class="caption">plot of chunk bi-image-region-crop-rotation</p>
</div>
</div>
<div id="color" class="section level3">
<h3 class="hasAnchor">
<a href="#color" class="anchor"></a>Color</h3>
<p>To lower bandwidth it is possible to directly ask for transformed bit-depth of the returned image through the <code>quality</code> argument. It can take four values:</p>
<ol style="list-style-type: decimal">
<li>
<code>"native"</code> which returns the image as stored in the BnF database,</li>
<li>
<code>"color"</code> with the image in full color using 24 bits per pixel,</li>
<li>
<code>"grey"</code> with the image in greyscale using 8 bits per pixel,</li>
<li>
<code>"bitonal"</code> where is pixel is either black or white using 1 bit per pixel.</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Native</span>
<span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1250</span>, <span class="fl">1300</span>, <span class="fl">1600</span>, <span class="fl">1650</span><span class="op">)</span>,
         size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">50</span><span class="op">)</span>,
         quality <span class="op">=</span> <span class="st">"native"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-quality-1.png" alt=""><p class="caption">plot of chunk bi-image-quality</p>
</div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Color</span>
<span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1250</span>, <span class="fl">1300</span>, <span class="fl">1600</span>, <span class="fl">1650</span><span class="op">)</span>,
         size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">50</span><span class="op">)</span>,
         quality <span class="op">=</span> <span class="st">"color"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-quality-2.png" alt=""><p class="caption">plot of chunk bi-image-quality</p>
</div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Grey</span>
<span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1250</span>, <span class="fl">1300</span>, <span class="fl">1600</span>, <span class="fl">1650</span><span class="op">)</span>,
         size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">50</span><span class="op">)</span>,
         quality <span class="op">=</span> <span class="st">"gray"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-quality-3.png" alt=""><p class="caption">plot of chunk bi-image-quality</p>
</div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Bitonal</span>
<span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1250</span>, <span class="fl">1300</span>, <span class="fl">1600</span>, <span class="fl">1650</span><span class="op">)</span>,
         size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">50</span><span class="op">)</span>,
         quality <span class="op">=</span> <span class="st">"bitonal"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-quality-4.png" alt=""><p class="caption">plot of chunk bi-image-quality</p>
</div>
</div>
<div id="format" class="section level3">
<h3 class="hasAnchor">
<a href="#format" class="anchor"></a>Format</h3>
<p>The images can be returned as different files format. This can be changed through the <code>format</code> argument which can take all these values:</p>
<ul>
<li>
<code>"jpg"</code> JPEG format (which is used by default),</li>
<li>
<code>"gif"</code> GIF format,</li>
<li>
<code>"png"</code> PNG,</li>
<li>
<code>"jp2"</code> JP2,</li>
<li>
<code>"pdf"</code> PDF,</li>
<li>
<code>"tif"</code> TIFF.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># JPG image</span>
<span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="st">"full"</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">75</span>, <span class="fl">75</span><span class="op">)</span>,
         format <span class="op">=</span> <span class="st">"jpg"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-format-1.png" alt=""><p class="caption">plot of chunk bi-image-format</p>
</div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># PDF image</span>
<span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, region <span class="op">=</span> <span class="st">"full"</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">75</span>, <span class="fl">75</span><span class="op">)</span>,
         format <span class="op">=</span> <span class="st">"pdf"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="bi-image-format-2.png" alt=""><p class="caption">plot of chunk bi-image-format</p>
</div>
</div>
<div id="saving-the-image" class="section level3">
<h3 class="hasAnchor">
<a href="#saving-the-image" class="anchor"></a>Saving the image</h3>
<p>To save the images you can use the function <code>image_write()</code> in the <code>magick</code> package. <code>image_write()</code> can accept any image filetype:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">img</span> <span class="op">=</span> <span class="fu"><a href="../reference/bi_image.html">bi_image</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">50</span><span class="op">)</span>,
               region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1250</span>, <span class="fl">1300</span>, <span class="fl">1600</span>, <span class="fl">1650</span><span class="op">)</span><span class="op">)</span>

<span class="fu">magick</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/magick/reference/editing.html">image_write</a></span><span class="op">(</span><span class="va">img</span>, <span class="st">"./my_image.png"</span><span class="op">)</span></code></pre></div>
<p>The second argument specifies the file path. Refer to the help of the function through <code><a href="https://docs.ropensci.org/magick/reference/editing.html">?magick::image_write</a></code> to get an overview of all the arguments and uses.</p>
</div>
</div>
<div id="multiple-images" class="section level2">
<h2 class="hasAnchor">
<a href="#multiple-images" class="anchor"></a>Multiple Images</h2>
<p>To access several images you can use a list of identifier and wrap calls to <code><a href="../reference/bi_image.html">bi_image()</a></code> using <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">several_ids</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, <span class="st">"ark:/12148/bpt6k10411495/f13"</span>,
                <span class="st">"ark:/12148/bpt6k10411495/f15"</span><span class="op">)</span>

<span class="va">several_imgs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">several_ids</span>, <span class="va">bi_image</span>, region <span class="op">=</span> <span class="st">"full"</span>,
                      size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>

<span class="va">several_imgs</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; # A tibble: 1 x 7</span>
<span class="co">#&gt;   format width height colorspace matte filesize density</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt;  &lt;int&gt; &lt;chr&gt;      &lt;lgl&gt;    &lt;int&gt; &lt;chr&gt;  </span>
<span class="co">#&gt; 1 JPEG      50     50 sRGB       FALSE     1480 400x400</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; # A tibble: 1 x 7</span>
<span class="co">#&gt;   format width height colorspace matte filesize density</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt;  &lt;int&gt; &lt;chr&gt;      &lt;lgl&gt;    &lt;int&gt; &lt;chr&gt;  </span>
<span class="co">#&gt; 1 JPEG      50     50 sRGB       FALSE     1154 400x400</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; # A tibble: 1 x 7</span>
<span class="co">#&gt;   format width height colorspace matte filesize density</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt;  &lt;int&gt; &lt;chr&gt;      &lt;lgl&gt;    &lt;int&gt; &lt;chr&gt;  </span>
<span class="co">#&gt; 1 JPEG      50     50 sRGB       FALSE     1475 400x400</span></code></pre></div>
<p>The arguments can be specified similarly to single calls to <code><a href="../reference/bi_image.html">bi_image()</a></code>.</p>
</div>
</div>
<div id="get-images-metadata---bi_metadata" class="section level1">
<h1 class="hasAnchor">
<a href="#get-images-metadata---bi_metadata" class="anchor"></a>Get Image(s) Metadata - <code>bi_metadata()</code>
</h1>
<p>One interest of the BnF image library is the richness of the metadata associated with an image. For the moment bnfimage only converts metadata to a giant list to make it accessible.</p>
<div id="single-image-1" class="section level2">
<h2 class="hasAnchor">
<a href="#single-image-1" class="anchor"></a>Single Image</h2>
<p>Using a single image identifier you can retrieve the metadata of an image through the function <code><a href="../reference/bi_metadata.html">bi_metadata()</a></code>. The first argument is the identifier of the image as for <code><a href="../reference/bi_image.html">bi_image()</a></code>:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">met</span> <span class="op">=</span> <span class="fu"><a href="../reference/bi_metadata.html">bi_metadata</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">met</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; List of 13</span>
<span class="co">#&gt;  $ @id        : chr "https://gallica.bnf.fr/iiif/ark:/12148/bpt6k10411495/manifest.json"</span>
<span class="co">#&gt;  $ label      : chr "BnF, département Arsenal, GR FOL-30 (2)"</span>
<span class="co">#&gt;  $ attribution: chr "Bibliothèque nationale de France"</span>
<span class="co">#&gt;  $ license    : chr "https://gallica.bnf.fr/html/und/conditions-dutilisation-des-contenus-de-gallica"</span>
<span class="co">#&gt;  $ logo       : chr "https://gallica.bnf.fr/mbImage/logos/logo-bnf.png"</span>
<span class="co">#&gt;  $ related    : chr "https://gallica.bnf.fr/ark:/12148/bpt6k10411495"</span>
<span class="co">#&gt;  $ seeAlso    :List of 1</span>
<span class="co">#&gt;  $ description: chr "Les liliacées. Tome 2 / , par P.-J. Redouté. [Tome premier-] huitième"</span>
<span class="co">#&gt;  $ metadata   :List of 13</span>
<span class="co">#&gt;  $ sequences  :List of 1</span>
<span class="co">#&gt;  $ thumbnail  :List of 1</span>
<span class="co">#&gt;  $ @type      : chr "sc:Manifest"</span>
<span class="co">#&gt;  $ @context   : chr "http://iiif.io/api/presentation/2/context.json"</span></code></pre></div>
<p>The metadata contains much information on the actual image as well as its context.</p>
</div>
<div id="multiple-images-1" class="section level2">
<h2 class="hasAnchor">
<a href="#multiple-images-1" class="anchor"></a>Multiple Images</h2>
<p>Similarly as for <code><a href="../reference/bi_image.html">bi_image()</a></code> to access the metadata of several images you can wrap the calls to <code><a href="../reference/bi_metadata.html">bi_metadata()</a></code> through a list of identifiers using <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">several_met</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">several_ids</span>, <span class="va">bi_metadata</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">several_met</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ :List of 13</span>
<span class="co">#&gt;   ..$ @id        : chr "https://gallica.bnf.fr/iiif/ark:/12148/bpt6k10411495/manifest.json"</span>
<span class="co">#&gt;   ..$ label      : chr "BnF, département Arsenal, GR FOL-30 (2)"</span>
<span class="co">#&gt;   ..$ attribution: chr "Bibliothèque nationale de France"</span>
<span class="co">#&gt;   ..$ license    : chr "https://gallica.bnf.fr/html/und/conditions-dutilisation-des-contenus-de-gallica"</span>
<span class="co">#&gt;   ..$ logo       : chr "https://gallica.bnf.fr/mbImage/logos/logo-bnf.png"</span>
<span class="co">#&gt;   ..$ related    : chr "https://gallica.bnf.fr/ark:/12148/bpt6k10411495"</span>
<span class="co">#&gt;   ..$ seeAlso    :List of 1</span>
<span class="co">#&gt;   ..$ description: chr "Les liliacées. Tome 2 / , par P.-J. Redouté. [Tome premier-] huitième"</span>
<span class="co">#&gt;   ..$ metadata   :List of 13</span>
<span class="co">#&gt;   ..$ sequences  :List of 1</span>
<span class="co">#&gt;   ..$ thumbnail  :List of 1</span>
<span class="co">#&gt;   ..$ @type      : chr "sc:Manifest"</span>
<span class="co">#&gt;   ..$ @context   : chr "http://iiif.io/api/presentation/2/context.json"</span>
<span class="co">#&gt;  $ :List of 13</span>
<span class="co">#&gt;   ..$ @id        : chr "https://gallica.bnf.fr/iiif/ark:/12148/bpt6k10411495/manifest.json"</span>
<span class="co">#&gt;   ..$ label      : chr "BnF, département Arsenal, GR FOL-30 (2)"</span>
<span class="co">#&gt;   ..$ attribution: chr "Bibliothèque nationale de France"</span>
<span class="co">#&gt;   ..$ license    : chr "https://gallica.bnf.fr/html/und/conditions-dutilisation-des-contenus-de-gallica"</span>
<span class="co">#&gt;   ..$ logo       : chr "https://gallica.bnf.fr/mbImage/logos/logo-bnf.png"</span>
<span class="co">#&gt;   ..$ related    : chr "https://gallica.bnf.fr/ark:/12148/bpt6k10411495"</span>
<span class="co">#&gt;   ..$ seeAlso    :List of 1</span>
<span class="co">#&gt;   ..$ description: chr "Les liliacées. Tome 2 / , par P.-J. Redouté. [Tome premier-] huitième"</span>
<span class="co">#&gt;   ..$ metadata   :List of 13</span>
<span class="co">#&gt;   ..$ sequences  :List of 1</span>
<span class="co">#&gt;   ..$ thumbnail  :List of 1</span>
<span class="co">#&gt;   ..$ @type      : chr "sc:Manifest"</span>
<span class="co">#&gt;   ..$ @context   : chr "http://iiif.io/api/presentation/2/context.json"</span>
<span class="co">#&gt;  $ :List of 13</span>
<span class="co">#&gt;   ..$ @id        : chr "https://gallica.bnf.fr/iiif/ark:/12148/bpt6k10411495/manifest.json"</span>
<span class="co">#&gt;   ..$ label      : chr "BnF, département Arsenal, GR FOL-30 (2)"</span>
<span class="co">#&gt;   ..$ attribution: chr "Bibliothèque nationale de France"</span>
<span class="co">#&gt;   ..$ license    : chr "https://gallica.bnf.fr/html/und/conditions-dutilisation-des-contenus-de-gallica"</span>
<span class="co">#&gt;   ..$ logo       : chr "https://gallica.bnf.fr/mbImage/logos/logo-bnf.png"</span>
<span class="co">#&gt;   ..$ related    : chr "https://gallica.bnf.fr/ark:/12148/bpt6k10411495"</span>
<span class="co">#&gt;   ..$ seeAlso    :List of 1</span>
<span class="co">#&gt;   ..$ description: chr "Les liliacées. Tome 2 / , par P.-J. Redouté. [Tome premier-] huitième"</span>
<span class="co">#&gt;   ..$ metadata   :List of 13</span>
<span class="co">#&gt;   ..$ sequences  :List of 1</span>
<span class="co">#&gt;   ..$ thumbnail  :List of 1</span>
<span class="co">#&gt;   ..$ @type      : chr "sc:Manifest"</span>
<span class="co">#&gt;   ..$ @context   : chr "http://iiif.io/api/presentation/2/context.json"</span></code></pre></div>
</div>
</div>
<div id="get-both-images-and-metadata---bi_all_data" class="section level1">
<h1 class="hasAnchor">
<a href="#get-both-images-and-metadata---bi_all_data" class="anchor"></a>Get Both Images and Metadata - <code>bi_all_data()</code>
</h1>
<p>The <code><a href="../reference/bi_all_data.html">bi_all_data()</a></code> function can be used to quickly retrieve both the images as well as the associated metadata of one or several images. The outputs stores the identifier of an image in a column, the actual image in a second one, and the associated metadata in a third one:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bi_all_data.html">bi_all_data</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ark:/12148/bpt6k10411495/f11"</span>, <span class="st">"ark:/12148/bpt6k10411495/f12"</span><span class="op">)</span>,
            size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 x 3</span>
<span class="co">#&gt;   identifier                   image      metadata         </span>
<span class="co">#&gt;   &lt;chr&gt;                        &lt;list&gt;     &lt;list&gt;           </span>
<span class="co">#&gt; 1 ark:/12148/bpt6k10411495/f11 &lt;magck-mg&gt; &lt;named list [13]&gt;</span>
<span class="co">#&gt; 2 ark:/12148/bpt6k10411495/f12 &lt;magck-mg&gt; &lt;named list [13]&gt;</span></code></pre></div>
</div>
<div id="rate-limitation" class="section level1">
<h1 class="hasAnchor">
<a href="#rate-limitation" class="anchor"></a>Rate Limitation</h1>
<p>By default <code>bnfimage</code> implements rate limitation through the <a href="https://cran.r-project.org/package=ratelimitr"><code>ratelimitr</code> package</a>. The query are limited to a maximum of 1 every 3 seconds to avoid being blocked by the BnF server. This is the limit at which the BnF server considers the queries to be malicious. For the moment this limitation cannot be lifted.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matthias Grenié.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
